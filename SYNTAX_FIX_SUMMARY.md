# DeepSeek 提示词语法错误修复

## 🚨 问题描述

在更新 DeepSeek 提示词后，应用启动时出现语法错误：

```
Error [TransformError]: Transform failed with 1 error:
/Users/asimo/asimoGo/src/services/deepseek.ts:35:46: ERROR: Expected ";" but found "YYYY"
```

## 🔍 错误原因分析

### 1. **时间格式语法冲突**

```typescript
// 错误写法：
- 时间：只在原文出现时规范为 `YYYY-MM - DD`；不要臆造时间。

// 问题：`YYYY-MM - DD` 被JS解析器误认为是表达式（YYYY减去MM减去DD）
```

### 2. **反引号语法冲突**

```typescript
// 错误写法：
- 代码：使用合适的代码块语言；无法判断时用 `text`；仅修正标点与明显拼写。

// 问题：模板字符串中的 `text` 被解析器误认为是变量
```

### 3. **提示词不完整**

````typescript
// 错误写法：
- 不要用 ``` 或```markdown
`;

// 问题：语句不完整，缺少说明
````

## ✅ 修复方案

### 1. **时间格式修复**

```diff
- 时间：只在原文出现时规范为 `YYYY-MM - DD`；不要臆造时间。
+ 时间：只在原文出现时规范为 YYYY-MM-DD 格式；不要臆造时间。
```

### 2. **代码标识修复**

```diff
- 代码：使用合适的代码块语言；无法判断时用 `text`；仅修正标点与明显拼写。
+ 代码：使用合适的代码块语言；无法判断时用 text 语言标识；仅修正标点与明显拼写。
```

### 3. **输出要求完善**

````diff
- 不要用 ``` 或```markdown
+ - 不要用三引号代码块包裹整个输出内容。
+ - 保持原文语言（中文/英文/混合），极短或噪声过多时只保留核心信息。
````

## 🧪 验证结果

修复后的语法检查：

```bash
✅ No linter errors found.
```

## 📚 经验总结

### 1. **模板字符串陷阱**

在 JavaScript 模板字符串（反引号包裹）中使用反引号会导致语法冲突：

- ❌ \`使用 \`text\` 标识\`
- ✅ \`使用 text 标识\`

### 2. **数学表达式误解**

连字符在模板字符串中可能被误解为减法运算：

- ❌ \`YYYY-MM - DD\`（空格导致解析为 YYYY 减去 MM 减去 DD）
- ✅ \`YYYY-MM-DD 格式\`

### 3. **提示词完整性**

确保所有语句完整，避免悬挂的语法结构。

## 🔧 预防措施

1. **使用 ESLint/TypeScript 检查**：及时发现语法错误
2. **模板字符串规范**：避免在模板字符串内使用特殊字符
3. **分步测试**：大幅修改后及时测试编译
4. **代码审查**：复杂字符串内容需要仔细检查

现在应用应该能正常启动，DeepSeek 提示词功能完整且语法正确！
